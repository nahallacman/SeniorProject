<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>EthKitTCP: Filtering and Decoding</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EthKitTCP
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___decoding.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Filtering and Decoding</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8955adf440115510aace00d81444e268"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#ga8955adf440115510aace00d81444e268">mTouch_Decode</a> (void)</td></tr>
<tr class="memdesc:ga8955adf440115510aace00d81444e268"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the state of each active-mode sensor using the latest acquisition value.  <a href="#ga8955adf440115510aace00d81444e268">More...</a><br /></td></tr>
<tr class="separator:ga8955adf440115510aace00d81444e268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad860d35191988afa8f9d02bcb946c08b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___decoding.html#gad860d35191988afa8f9d02bcb946c08b">mTouch_UpdateBaseline</a> (void)</td></tr>
<tr class="memdesc:gad860d35191988afa8f9d02bcb946c08b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the baseline for the given sensor with the given value.  <a href="#gad860d35191988afa8f9d02bcb946c08b">More...</a><br /></td></tr>
<tr class="separator:gad860d35191988afa8f9d02bcb946c08b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The mTouch Filtering and Decoding module executes the detection algorithms for the framework. Using the latched output from the acquisition module, the service function is called each time a new value is available for each sensor. It will then loop through all of the active sensors and determine if they have changed state.</p>
<p>This is achieved by implementing a baseline average of the sensor's reading. The baseline is only updated while the sensor is in the <a class="el" href="m_touch_cap_2_p_i_c12_f_01_p_i_c16_f_01_library_2m_touch_8h.html#a7d72b112c35bc51408030eb7ecdcacd2a9171b63f68c2e5ed308f9700e824cbbe" title="Sensor is currently released. ">MTOUCH_RELEASED</a> state. The difference between the baseline and the current reading is compared against the #THRESHOLD_PRESS_SENSOR0 (or equivalent) value to determine if a change in state is necessary.</p>
<p>If the system sees that the reading has dipped below the baseline - the opposite direction of a finger press - the baseline will update itself based on the behavior chosen by configuration option #MTOUCH_NEGATIVE_CAPACITANCE. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga8955adf440115510aace00d81444e268"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mTouch_Decode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the state of each active-mode sensor using the latest acquisition value. </p>
<p>This is the mTouch service routine that performs sensor state transitions based on the value of the latest acquisition value as compared to its previous behavior. </p>
<ul>
<li>Get the current shift amount by comparing the new reading with the average and store it in the variable 'delta'. If a negative shift is detected, clear the delta variable. Then, if required by the features that have been enabled, store the delta value in the mTouch_deltas array for later use.</li>
</ul>
<ol type="1">
<li>Now that all sensors have had their initial decoding step completed, if sliders are implemented in this application, perform decoding on them now.</li>
<li>Finally, if all active sensors are initialized and the system is not about to change modes, send communications data.</li>
<li>Enable active-mode mTouch scanning now that we're finished.</li>
</ol>

<p>Definition at line <a class="el" href="m_touch_8c_source.html#l00391">391</a> of file <a class="el" href="m_touch_8c_source.html">mTouch.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___decoding_ga8955adf440115510aace00d81444e268_cgraph.png" border="0" usemap="#group___decoding_ga8955adf440115510aace00d81444e268_cgraph" alt=""/></div>
<!-- MAP 0 -->
</div>
</p>

</div>
</div>
<a class="anchor" id="gad860d35191988afa8f9d02bcb946c08b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mTouch_UpdateBaseline </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the baseline for the given sensor with the given value. </p>
<p>Updates a sensor's baseline (or baseline) in order to track the environmental changes of the system. </p>
<h1><a class="anchor" id="UAvgImp"></a>
Algorithm Implementation Notes</h1>
<p>This function has several possible implementations based on the current configuration options of the framework. The important configuration options are: </p><ul>
<li>#MTOUCH_BASELINE_RATE - acts as a debounce counter for updating the baseline only every N scans. </li>
<li>#MTOUCH_BASELINE_WEIGHT - determines what weight to give the reading when updating the baseline.</li>
</ul>
<p>The average updates the counter variable and compares it with #MTOUCH_BASELINE_RATE to see if it should continue or return. If the counter allows it to continue, the average is then updated using one of four possible implementations which is determined by the #MTOUCH_BASELINE_WEIGHT option.</p>
<p><br />
<br />
<br />
 </p>

<p>Definition at line <a class="el" href="m_touch_8c_source.html#l01021">1021</a> of file <a class="el" href="m_touch_8c_source.html">mTouch.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___decoding_gad860d35191988afa8f9d02bcb946c08b_icgraph.png" border="0" usemap="#group___decoding_gad860d35191988afa8f9d02bcb946c08b_icgraph" alt=""/></div>
<!-- MAP 1 -->
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu May 7 2015 20:33:58 for EthKitTCP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
