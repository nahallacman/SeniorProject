<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>EthKitTCP: PC Communications :: One-way UART ASCII output</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EthKitTCP
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ts-_comms-1way.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">PC Communications :: One-way UART ASCII output </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ol>
<li>
<p class="startli">Make sure the <a class="el" href="m_comm__config_8h.html" title="mComm Configuration! Main configuration file for the mComm module. ">mComm_config.h</a> file is properly configured. </p><div class="fragment"><div class="line"><span class="preprocessor">#define MCOMM_ENABLED</span></div>
<div class="line"><span class="preprocessor">#define MCOMM_TYPE                    MCOMM_UART_ONE_WAY</span></div>
<div class="line"><span class="preprocessor">#define MCOMM_UART_BAUDRATE           38400                       // (or) other valid baud rate option</span></div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="preprocessor">#define MCOMM_UART_1WAY_MODULE        MCOMM_UART_HARDWARE_MODULE  // (or) MCOMM_UART_SOFTWARE_IMPLEMENTATION</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// If MCOMM_UART_SOFTWARE_IMPLEMENTATION is chosen:</span></div>
<div class="line"><span class="preprocessor">    #define MCOMM_UART_SOFT_TXPORT        PORTA</span></div>
<div class="line"><span class="preprocessor">    #define MCOMM_UART_SOFT_TXTRIS        TRISA   </span></div>
<div class="line"><span class="preprocessor">    #define MCOMM_UART_SOFT_TXPIN         5       // &lt;-- The bit of the PORT/TRIS register</span></div>
<div class="line"><span class="preprocessor">                                                  //     NOT the hardware pin on the device</span></div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="preprocessor">#define MCOMM_UART_1WAY_OUTPUT        MCOMM_UART_1WAY_DECIMAL     // (or) MCOMM_UART_1WAY_HEX        </span></div>
<div class="line"><span class="preprocessor">#define MCOMM_UART_1WAY_DELIMITER     &#39;;&#39;                         </span></div>
</div><!-- fragment --><p> If you wish to use the PIC18F PIC24F One-Way GUI, force the mComm module to follow the GUI's packet structure by defining this value: </p><div class="fragment"><div class="line"><span class="preprocessor">#define MCOMM_UART_1WAY_OUT_GUIv1_1</span></div>
</div><!-- fragment --><p> The following options will determine what values are output by the UART. Matrix output is not supported by the GUI but may be seen from a terminal window. </p><div class="fragment"><div class="line"><span class="preprocessor">#define MCOMM_UART_1WAY_OUT_STATE             // &lt;-- If defined, outputs the state mask</span></div>
<div class="line"><span class="preprocessor">#define MCOMM_UART_1WAY_OUT_TOGGLE            // &lt;-- If defined, outputs the toggle state mask</span></div>
<div class="line"><span class="preprocessor">#define MCOMM_UART_1WAY_OUT_SLIDER            // &lt;-- If defined, outputs the slider output value</span></div>
<div class="line"><span class="preprocessor">#define MCOMM_UART_1WAY_OUT_MATRIX            // &lt;-- If defined, outputs the matrix press coordinate</span></div>
<div class="line"><span class="preprocessor">#define MCOMM_UART_1WAY_OUT_READING           // &lt;-- If defined, outputs the raw reading values</span></div>
<div class="line"><span class="preprocessor">#define MCOMM_UART_1WAY_OUT_BASELINE          // &lt;-- If defined, outputs the sensor baseline values</span></div>
</div><!-- fragment --><p>If you are using a processor with an APFCON register that allows for multiple pins to be used as 'TX', your application is responsible for initializing APFCON to the correct value for your hardware layout. The mTouch framework will warn you about this when compiling. To remove this warning, uncomment the #define at the bottom of <a class="el" href="m_touch__config_8h.html" title="Framework Configuration! Main configuration file for the mTouch Framework. ">mTouch_config.h</a>: </p><div class="fragment"><div class="line"><span class="preprocessor">#define APFCON_INITIALIZED    // For processors with an APFCON register(s), this </span></div>
<div class="line">                              <span class="comment">// #define can be uncommented to stop the mTouch </span></div>
<div class="line">                              <span class="comment">// Framework from producing a &quot;remember to set </span></div>
<div class="line">                              <span class="comment">// APFCON&quot; warning.</span></div>
<div class="line">                              <span class="comment">//</span></div>
<div class="line">                              <span class="comment">// RULE OF PROGRAMMING #4: Register bits initialize, </span></div>
<div class="line">                              <span class="comment">//      by law, to the value you don&#39;t want. Always </span></div>
<div class="line">                              <span class="comment">//      explicitly initialize.</span></div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
<p class="startli">Program the board normally (not in debug mode) and connect the PKSA to both the PC and the board.<br />
</p>
<p class="endli"></p>
</li>
<li>
Make sure both the PIC and the PKSA are being supplied with power. Either: <ul>
<li>
Supply power to the PIC from an external source that is also supplying power to the PKSA's PWR and GND pins. </li>
<li>
Supply power to the PIC from the PKSA by pressing and holding the black button for 3 seconds until the green power LED turns on. </li>
<li>
Supply power to the PIC from an external source that is NOT connected to the PWR/GND pins of the PKSA and then supply power to the PKSA by pressing on its black button for 3 seconds until the green power LED turns on. </li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Be careful not to supply power to the PIC from two different sources as you may destroy the board.</dd></dl>
</li>
<li>
<p class="startli">Is the PKSA's red LED on?<br />
 If no - </p><ul>
<li>
Use a scope to verify the TX pin of the PKSA is receiving data from the PIC. </li>
<li>
If it is, the PKSA's firmware has not been updated to perform as a UART-to-USB converter. See <a class="el" href="_p_k_s_a_r_s232.html">this guide</a> on using the PKSA loader utility to reflash the PICKit Serial Analyzer's firmware. </li>
</ul>
<p>If yes - continue to 5.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Determine which COM port has been assigned to the PKSA.<br />
 In Windows - </p><ul>
<li>
Right click 'My Computer' &ndash;&gt; Properties &ndash;&gt; Hardware &ndash;&gt; Device Manager </li>
<li>
You should find it listed under "Ports (COM)". </li>
</ul>
<p>If it's not there, you need to reinstall the Windows driver for the UART-to-USB behavior. The driver can be found in the PKSA Loader Utility's folder. Correct installation is based on the version of Windows you are using, but can be accomplished by right clicking the file and selecting 'Install' in most cases.</p>
<p class="endli"></p>
</li>
<li>
Open the mTouch One-Way GUI and make sure the communication settings are set to:<br />
<br />
 <ul>
<li>
The baud rate you have chosen for #MTOUCH_UART_BAUDRATE in <a class="el" href="m_comm__config_8h.html" title="mComm Configuration! Main configuration file for the mComm module. ">mComm_config.h</a>. </li>
<li>
COM Port dependant on current assignment in Device Manager. </li>
</ul>
</li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">index</a></li><li class="navelem"><a class="el" href="troubleshoot.html">Troubleshooting</a></li><li class="navelem"><a class="el" href="ts-_comms.html">PC Communications - Troubleshooting</a></li>
    <li class="footer">Generated on Thu May 7 2015 20:33:58 for EthKitTCP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
