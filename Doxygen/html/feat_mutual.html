<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>EthKitTCP: Mutual Coupling Drives</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EthKitTCP
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('feat_mutual.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Mutual Coupling Drives </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In some cases, you may wish to measure the amount of coupling between a driven pin and a capacitive sensor. Detecting ungrounded metal, for instance, is not always easily done with a normal CVD scan. The metal will not cause a large enough change in the capacitance of the sensor since it is floating.</p>
<p>Mutual drives can be used to look for an increase in the coupling between two traces. As that piece of floating metal (or a human finger, or...) comes near, the coupling between the two traces will increase. (The relative permativity between them is increasing.)</p>
<p>This allows for two different capacitive features to be measured at once: </p><ul>
<li>
The <b>self capacitance</b> of the sensor, determined by the relationship between the capacitance of the external sensor with the capacitance of the internal ADC hold capacitor. <ul>
<li>
(Default mTouch Scan) </li>
</ul>
</li>
<li>
The <b>coupling</b> between the external sensor and the mutual drive. <ul>
<li>
(Mutual Sensor Drive) </li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>One mutual drive can be shared among all sensors. <div class="image">
<img src="mutualLines.JPG" alt="mutualLines.JPG"/>
<div class="caption">
Mutual Field Lines with and without Increased Coupling</div></div>
</dd></dl>
<h1><a class="anchor" id="featMutual-How"></a>
How It Works</h1>
<p>When the #CVD_MUTUAL_ENABLED option in <a class="el" href="m_touch__config__cvd_advanced_8h.html" title="Framework Configuration! Advanced CVD Scanning Options. ">mTouch_config_cvdAdvanced.h</a> is used, the defined mutual pin is driven so that increased coupling (between the mutual drive and the sensor) will cause a shift in the same direction as adding capacitance to the sensor. Both the CVD scan and the mutual drive will be occuring at the same time. This means you are getting the benefit of both scans in one. As the distance between the object-to-be-detected and the sensor gets smaller, the impact of the mutual scan will increase. As the distance gets larger, the self-capacitance mTouch scan will provide a majority of the sensitivity.</p>
<div class="image">
<img src="mutualWaveform.JPG" alt="mutualWaveform.JPG"/>
<div class="caption">
Mutual driving during a normal mTouch scan</div></div>
 <h1><a class="anchor" id="featMutual-Config"></a>
Mutual Sensor Configuration</h1>
<ol>
<li>
Open the <a class="el" href="m_touch__config__cvd_advanced_8h.html" title="Framework Configuration! Advanced CVD Scanning Options. ">mTouch_config_cvdAdvanced.h</a> file and uncomment #CVD_MUTUAL_ENABLED </li>
<li>
Set #CVD_MUTUAL_LAT to the exact LAT or PORT bit for the mutual drive. </li>
<li>
Set #CVD_MUTUAL_TRIS to the exact TRIS bit for the mutual drive. </li>
</ol>
<h1><a class="anchor" id="featMutual-Ex"></a>
Example</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#define CVD_MUTUAL_ENABLED                        // &lt;-- Enables a mutual drive during the mTouch scan</span></div>
<div class="line"><span class="comment">//#define CVD_MUTUAL_EXCLUSIVE_ENABLED            // &lt;-- NOT defined!</span></div>
<div class="line"><span class="preprocessor">#define CVD_MUTUAL_LAT                    LATA3   // &lt;-- The mutual sensor&#39;s LAT pin label</span></div>
<div class="line"><span class="preprocessor">#define CVD_MUTUAL_TRIS                   TRISA3  // &lt;-- The mutual sensor&#39;s TRIS pin label</span></div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="comment">//#define CVD_MUTUAL_ENABLED                      // &lt;-- NOT defined!</span></div>
<div class="line"><span class="preprocessor">#define CVD_MUTUAL_EXCLUSIVE_ENABLED              // &lt;-- Scanning ONLY with mutual coupling </span></div>
<div class="line">                                                  <span class="comment">//      and NO self-capacitance mTouch scan.</span></div>
<div class="line"><span class="preprocessor">#define CVD_MUTUAL_LAT                    LATC1   // &lt;-- The mutual sensor&#39;s LAT pin label</span></div>
<div class="line"><span class="preprocessor">#define CVD_MUTUAL_TRIS                   TRISC1  // &lt;-- The mutual sensor&#39;s TRIS pin label</span></div>
</div><!-- fragment --><h1><a class="anchor" id="featMutual-Out"></a>
Mutual Sensor Output</h1>
<p>There is no change to the mTouch API when using a mutual drive sensor. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">index</a></li><li class="navelem"><a class="el" href="_framework_features.html">Features</a></li>
    <li class="footer">Generated on Thu May 7 2015 20:33:58 for EthKitTCP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
